:root{
  --azul: #2c3e50;
  --rojo: #c0392b;
  --bg: #f4f7fa;
}

* { box-sizing: border-box; }

body{
  font-family: Arial, Helvetica, sans-serif;
  background: var(--bg);
  color: #222;
  margin: 18px;
}

/* Header */
h1 {
  text-align: center;
  color: #333;
}

/* Formulario paciente (principal) */
.form-wrapper {
  background: #fff;
  padding: 14px;
  border-radius: 8px;
  max-width: 420px;
  margin: 8px auto;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}
.form-wrapper label {
  display:block;
  margin: 8px 0;
  font-size: 14px;
}
.form-wrapper input, .form-wrapper select {
  margin-left: 6px;
  padding: 6px;
  font-size: 13px;
}

/* Genograma layout */
.genograma-container {
  position: relative;
  margin-top: 28px;
  display: flex;
  justify-content: center;
}
#conexiones {
  position: absolute;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

/* filas y slots */
.genograma { display:flex; flex-direction:column; gap: 24px; align-items:center; width: 100%; max-width: 960px; padding: 18px; }
.fila { display:flex; gap: 18px; align-items:center; justify-content:center; width:100%; }
.padres { justify-content: center; gap: 60px; }
.parent-slot { width:150px; height:120px; display:flex; align-items:center; justify-content:center; }
.paciente-slot { display:flex; align-items:center; justify-content:center; width:150px; min-width:150px; min-height:150px; }
.hermanos.left, .hermanos.right { display:flex; gap: 14px; align-items:center; justify-content:center; min-width:160px; }
.hijos { gap: 24px; justify-content:center; flex-wrap:wrap; }

/* persona (figuras) */
.persona {
  position: relative;
  width: 100px;
  height: 100px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  background: #fff;
  cursor: pointer;
  padding: 6px;
}

/* colores y formas base */
.persona.hombre {
  --c: var(--azul);
  border: 4px solid var(--c);
  border-radius: 8px;
}
.persona.mujer {
  --c: var(--rojo);
  border: 4px solid var(--c);
  border-radius: 50%;
}

/* Texto encima del pseudo-elemento interior */
.persona .nombre, .persona .edad {
  position: relative;
  z-index: 3;
  text-align:center;
}
.persona .nombre { font-weight: 700; font-size: 13px; line-height: 1.1; }
.persona .edad { font-size: 12px; color:#555; margin-top:4px; }

/* Figura interior que marca "paciente" (doble contorno) */
.persona.paciente::after{
  content: "";
  position: absolute;
  z-index: 2;
  top: 14px;
  left: 14px;
  right: 14px;
  bottom: 14px;
  border: 3px solid var(--c);
  pointer-events: none;
  /* por defecto cuadrado; para mujer se redefine */
  border-radius: 8px;
}

/* si paciente y mujer -> inner circle */
.persona.paciente.mujer::after { border-radius: 50%; }

/* Asegurar que el contenido textual esté sobre el borde interior */
.persona { background: #fff; z-index: 4; }

/* Estilo para tachar a la persona fallecida (una X) */
.persona.fallecido {
  /* Asegura que la X se recorte en forma de círculo o cuadrado */
  overflow: hidden;

  /* Aquí está el truco:
     En lugar de usar "black" o "#000", usamos "var(--c)".
     Como las clases .hombre y .mujer ya definen qué color es --c,
     la X tomará automáticamente ese color.
  */
  background: 
    linear-gradient(to top right, transparent calc(50% - 2px), var(--c) calc(50% - 1px), var(--c) calc(50% + 1px), transparent calc(50% + 2px)),
    linear-gradient(to bottom right, transparent calc(50% - 2px), var(--c) calc(50% - 1px), var(--c) calc(50% + 1px), transparent calc(50% + 2px)),
    #fff; /* Fondo base blanco */

  background-size: 100% 100%;
  background-repeat: no-repeat;
}

/* Corrección de lectura SOLO para fallecidos */
.persona.fallecido .nombre, 
.persona.fallecido .edad { /* Agregué edad también por si acaso */
  background-color: rgba(255, 255, 255, 0.95); /* Fondo blanco casi sólido */
  border-radius: 4px;
  padding: 0 3px;          /* Un poquito de aire a los lados */
  box-shadow: 0 0 2px #fff; /* Pequeño resplandor para suavizar bordes */
  
  /* Aseguramos que flote sobre la X */
  position: relative; 
  z-index: 5; 
}

/* menú contextual */
.menu-acciones {
  position: absolute;
  background: #fff;
  border: 1px solid #cfcfcf;
  padding: 8px;
  border-radius: 8px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.12);
  z-index: 40;
}
.menu-acciones button {
  display:block;
  width: 100%;
  margin: 6px 0;
  padding: 6px 8px;
  background: #3498db;
  color: #fff;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
.menu-acciones button:hover { background:#2b7cb0; }

/* modal compacto formulario familiar */
.modal {
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%,-50%);
  z-index: 60;
  width: 320px;
}
.modal-inner {
  background: #fff;
  border-radius: 10px;
  padding: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.16);
}
.modal-inner h4 { margin: 4px 0 8px 0; }
.modal-inner label { display:block; margin:6px 0; font-size: 13px; }
.modal-inner input, .modal-inner select { margin-left:8px; padding:6px; font-size:13px; }
.modal-actions { display:flex; gap:8px; justify-content:flex-end; margin-top:8px; }
.modal-actions button { padding:6px 10px; border-radius:6px; border:none; cursor:pointer; }
.modal-actions button:first-child { background:#2ecc71; color:white; }
.modal-actions button:last-child { background:#e74c3c; color:white; }

/* utilidades */
.oculto { display:none; }

/* responsivo pequeño */
@media (max-width:600px) {
  .parent-slot, .paciente-slot { width:120px; height:120px; }
  .persona { width:82px; height:82px; }
  .persona.paciente::after { top:10px; left:10px; right:10px; bottom:10px; }
}