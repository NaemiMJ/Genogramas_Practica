<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Paciente</title>
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  
  <link rel="stylesheet" href="/style/style_home.css">
  <link rel="stylesheet" href="../style/styles_aside.css"> 
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="../src/js/authGuard.js"></script>
</head>
<body>
  <div class="page-wrapper">
    
    <div class="sidebar-overlay"></div>

    <aside class="sidebar">
    <div class="sidebar-header text-center">
        <div class="user-avatar mx-auto mb-2">
          <img src="../assets/logo_sintergia.png" width="80px"> 
        </div>
        <h5 class="user-name"></h5>
        <p class="user-role text-white-50"></p>
      </div>
      
       <ul class="nav flex-column">
            <li class="nav-item"><a class="nav-link" href="./home.html"><i class="bi bi-house-door-fill"></i> Home</a></li>
            <li class="nav-item"><a class="nav-link" href="./pacientes.html"><i class="bi bi-heart-fill"></i> Pacientes</a></li>
            <li class="nav-item"><a class="nav-link" href="./usuarios.html"><i class="bi bi-people-fill"></i> Usuarios</a></li>
            <li class="nav-item"><a class="nav-link" href="./auditoria.html"><i class="bi bi-bar-chart-fill"></i> Auditoría</a></li>
        </ul>

      <a href="../index.html" class="btn btn-logout mt-auto">
        <i class="bi bi-box-arrow-left"></i> Cerrar sesión
      </a>
    </aside>

    <main class="main-content">
      <button class="btn d-lg-none mb-3" id="sidebar-toggle"><i class="bi bi-list"></i></button>

      <header class="content-header">Cargando paciente...</header>

      <div class="container-fluid mt-4">
        <div class="row g-4">
          
          <div class="col-lg-3 col-md-4">
            <div class="card h-100">
              <div class="card-body text-center d-flex flex-column justify-content-center align-items-center p-4">
                <h5 class="card-title mb-3">Foto Paciente</h5>
                
                <form id="upload-photo-form">
                  <label for="photo-input" class="photo-upload-label" style="cursor: pointer;" title="Haz clic para cambiar la foto">
                    
                    <img src="https://placehold.co/200x200/6c757d/white?text=Paciente" 
                         class="img-fluid rounded-circle shadow-sm" 
                         alt="Foto del Paciente" 
                         id="detalle-foto" 
                         style="max-width: 200px; min-height: 200px; object-fit: cover;">
                  </label>
                  
                  <input type="file" id="photo-input" name="foto" accept="image/*" style="display: none;">
                </form>
                </div>
            </div>
          </div>
          <div class="col-lg-4 col-md-8">
            <div class="card h-100">
              <div class="card-body">
                <h5 class="card-title">Datos Personales</h5>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item"><strong>RUT:</strong> <span id="detalle-rut">...</span></li>
                  <li class="list-group-item"><strong>Sexo:</strong> <span id="detalle-sexo">...</span></li>
                  <li class="list-group-item"><strong>Fecha de Nacimiento:</strong> <span id="detalle-fec-nac">...</span></li>
                  <li class="list-group-item"><strong>Edad:</strong> <span id="detalle-edad">...</span></li>
                  <li class="list-group-item"><strong>Estado Vital:</strong> <span id="detalle-estado-vital">...</span></li>
                </ul>
              </div>
            </div>
          </div>

          <div class="col-lg-5 col-md-10">
            <div class="card h-100">
              <div class="card-body">
                <h5 class="card-title">Genograma</h5>
                <div class="text-center p-3 border rounded bg-light" style="min-height: 200px; display: grid; place-items: center;">
                  <img src="https://placehold.co/500x200/f8f9fa/6c757d?text=Vista+Previa+Genograma" 
                       class="img-fluid rounded" 
                       alt="Genograma placeholder"
                       style="max-height: 240px;">
                </div>
                <div class="mt-3 d-flex flex-wrap gap-2">
                  <button class="btn btn-primary"><i class="bi bi-pencil-square me-1"></i> Editar Genograma</button>
                  <button class="btn btn-secondary"><i class="bi bi-box-arrow-down me-1"></i> Exportar Genograma</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="container-fluid mt-4">
        <div class="row">
          <div class="col-12">
            <div class="card">
              <div class="card-body d-flex flex-column">
                <h4 class="card-title">Documentos del paciente</h4>
                
                
                <form id="upload-form" class="mb-3">
                  <div class="input-group">
                    <input type="file" class="form-control" id="file-input" required accept=".pdf,.doc,.docx">
                    <button class="btn btn-primary" type="submit" id="upload-button">
                      <i class="bi bi-upload"></i> Subir
                    </button>
                  </div>
                  <div class="text-muted small mt-1">Seleccione un archivo (PDF, DOC, DOCX).</div>
                </form>

                <div class="flex-grow-1" style="min-height: 150px; max-height: 300px; overflow-y: auto;">
                  <ul class="list-group list-group-flush" id="lista-archivos">
                    <li id="no-files-message" class="list-group-item text-muted text-center">Cargando archivos...</li>
                  </ul>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>

    </main>
  </div>

<script src="../src/js/aside.js"></script>
<script src="../src/js/paciente_detalle.js"></script>

</body>
</html>